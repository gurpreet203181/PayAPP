var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),o=t(r(d[2])),c=t(r(d[3])),u=(function(t,n){if(!n&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var o=b(n);if(o&&o.has(t))return o.get(t);var c={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var l=u?Object.getOwnPropertyDescriptor(t,s):null;l&&(l.get||l.set)?Object.defineProperty(c,s,l):c[s]=t[s]}c.default=t,o&&o.set(t,c);return c})(r(d[4])),s=(r(d[5]),r(d[6])),l=r(d[7]),f=r(d[8]),p=r(d[9]),y=t(r(d[10])),h=t(r(d[11])),j=r(d[12]),O=r(d[13]),w=r(d[14]);function b(t){if("function"!=typeof WeakMap)return null;var n=new WeakMap,o=new WeakMap;return(b=function(t){return t?o:n})(t)}function P(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);n&&(c=c.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,c)}return o}function v(t){for(var n=1;n<arguments.length;n++){var c=null!=arguments[n]?arguments[n]:{};n%2?P(Object(c),!0).forEach(function(n){(0,o.default)(t,n,c[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):P(Object(c)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(c,n))})}return t}var x=function(t){var o=t.navigation,b=p.firebaseAuth.currentUser,P=(0,j.useSelector)(function(t){return t.userInfo.user}).friendList,x=(0,u.useState)(""),S=(0,c.default)(x,2),k=S[0],C=S[1],I=(0,u.useState)(),D=(0,c.default)(I,2),L=D[0],_=D[1],E=(0,u.useState)(!1),F=(0,c.default)(E,2),V=F[0],B=F[1],M=(0,j.useDispatch)(),T=function(){return n.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.default.awrap(p.cloudFunction.httpsCallable("searchFriendByUsername")({searchPhrase:k.toLowerCase()}).then(function(t){_(t.data)}).catch(function(t){console.log(t)}));case 2:case"end":return t.stop()}},null,null,null,Promise)},A=function(t){return n.default.async(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log(t),o.next=3,n.default.awrap(p.firestoreDb.collection("users").doc(null==b?void 0:b.uid).update({friendList:h.default.FieldValue.arrayUnion(t)}).catch(function(t){console.log("add friend:"+t)}));case 3:case"end":return o.stop()}},null,null,null,Promise)},H=function(t){M((0,O.setSelectedContact)(t)),o.goBack()};return(0,w.jsxs)(s.View,{style:{flex:1,backgroundColor:l.COLORS.white},children:[(0,w.jsx)(f.Header,{leftIcon:l.icons.back_arrow,onLeftIconPress:function(){return o.goBack()}}),(0,w.jsx)(s.View,{style:v(v({},l.SIZES.marginHorizontal),{},{justifyContent:"center",alignItems:"center",marginTop:10}),children:(0,w.jsx)(f.SearchBar,{onChangeText:C,clicked:V,setClicked:B,placeHolder:"Search new friend",onArrowPress:T,autoFocus:!0,onFocus:function(){B(!0)}})}),(0,w.jsx)(s.FlatList,{data:L,showsVerticalScrollIndicator:!1,keyExtractor:function(t){return t.id},renderItem:function(t){var n=t.item,o=!P.includes(n.uid);return(0,w.jsx)(s.View,{style:v(v({},l.SIZES.marginHorizontal),{},{marginTop:10}),children:(0,w.jsx)(f.ContactItem,{item:n,onPress:function(){!o&&H(n)},onAddPress:A,showAddButton:o})},n.key)},ListEmptyComponent:L?function(){return(0,w.jsxs)(s.View,{style:{justifyContent:"center",alignItems:"center",marginTop:20},children:[(0,w.jsx)(y.default,{source:r(d[15]),autoPlay:!0,loop:!0,style:{width:"100%",height:200,alignSelf:"center"}}),(0,w.jsx)(s.Text,{children:"No result"})]})}:null})]})};e.default=x;s.StyleSheet.create({})