var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),o=t(r(d[2])),l=t(r(d[3])),u=(function(t,n){if(!n&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var o=j(n);if(o&&o.has(t))return o.get(t);var l={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if("default"!==c&&Object.prototype.hasOwnProperty.call(t,c)){var s=u?Object.getOwnPropertyDescriptor(t,c):null;s&&(s.get||s.set)?Object.defineProperty(l,c,s):l[c]=t[c]}l.default=t,o&&o.set(t,l);return l})(r(d[4])),c=r(d[5]),s=r(d[6]),f=r(d[7]),p=r(d[8]),O=t(r(d[9])),h=t(r(d[10])),y=r(d[11]),b=r(d[12]),S=r(d[13]);function j(t){if("function"!=typeof WeakMap)return null;var n=new WeakMap,o=new WeakMap;return(j=function(t){return t?o:n})(t)}function v(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,l)}return o}function w(t){for(var n=1;n<arguments.length;n++){var l=null!=arguments[n]?arguments[n]:{};n%2?v(Object(l),!0).forEach(function(n){(0,o.default)(t,n,l[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):v(Object(l)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(l,n))})}return t}var x=function(t){var o,j,v=t.route,x=t.navigation,P=null==v?void 0:null==(o=v.params)?void 0:o.phoneNumber,T=null==v?void 0:null==(j=v.params)?void 0:j.user,L=(0,u.useState)(!1),_=(0,l.default)(L,2),M=_[0],F=_[1],k=(0,u.useState)(!1),N=(0,l.default)(k,2),R=N[0],D=N[1],I=(0,u.useState)(!1),A=(0,l.default)(I,2),B=A[0],V=A[1],E=function(t){V(!0);try{(0,y.checkVerification)(P,t).then(function(t){var o;t.success?n.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return o=b.firebaseAuth.currentUser,console.log(o),t.next=4,n.default.awrap(b.firestoreDb.collection("users").doc(null==o?void 0:o.uid).update({phoneNumber:P}));case 4:case"end":return t.stop()}},null,null,null,Promise).then(function(){b.cloudFunction.httpsCallable("walletObject-update_Personal_Wallet_phonenumber")({phoneNumber:P,user:T}),x.replace("AccountInfo")}):(V(!1),F(!0))})}catch(t){V(!1),console.log(t.message)}};return(0,S.jsxs)(s.View,{style:{flex:1,backgroundColor:f.COLORS.white},children:[(0,S.jsx)(O.default,{title:(0,c.t)("authLayout_TitleOtp"),subTitle:(0,c.t)("authLayout_Otp_SubTitle"),onClosePress:function(){return x.navigate("AccountInfo")},childern:(0,S.jsxs)(s.View,{style:{alignItems:"flex-start",height:300},children:[(0,S.jsx)(s.Text,{style:C.Email,children:P}),R&&(0,S.jsx)(s.Text,{style:C.resendMsg,children:(0,c.t)("resendCodeMsg")}),M&&(0,S.jsx)(s.View,{children:(0,S.jsx)(s.Text,{style:C.errorMsg,children:(0,c.t)("errorCodeMsg")})}),!R&&(0,S.jsx)(p.Button,{label:(0,c.t)("resendCode"),labelStyle:w(w({},f.FONTS.body5),{},{color:f.COLORS.gray2}),containerStyle:{marginTop:16},onPress:function(){P.length>3?(V(!0),(0,y.sendSmsVerification)(P).then(function(t){t.success&&(V(!1),D(!0),F(!1))})):(V(!1),F(!0))}}),(0,S.jsx)(s.View,{style:{marginTop:52,justifyContent:"center",alignItems:"center",marginHorizontal:10},children:(0,S.jsx)(h.default,{pinCount:4,autoFocusOnLoad:!0,codeInputFieldStyle:C.underlineStyleBase,codeInputHighlightStyle:C.underlineStyleHighLighted,onCodeFilled:function(t){E(t)}})})]})}),B&&(0,S.jsx)(p.Loading,{})]})};e.default=x;var C=s.StyleSheet.create({Email:w(w({},f.FONTS.body4),{},{letterSpacing:.3,fontSize:12}),underlineStyleBase:w(w({width:56,height:56,borderWidth:1,borderRadius:f.SIZES.padding},f.FONTS.body1),{},{fontSize:20,color:f.COLORS.darkBlue3}),underlineStyleHighLighted:{borderColor:"#03DAC6"},OtpButton:{backgroundColor:f.COLORS.darkBlue3,width:327,height:56,borderRadius:16},OtpText:w(w({color:f.COLORS.white},f.FONTS.h4),{},{fontSize:15}),errorMsg:w({paddingTop:20,textAlign:"center",color:f.COLORS.red},f.FONTS.body5),resendMsg:w({paddingTop:20,textAlign:"center",color:f.COLORS.green},f.FONTS.body5)})