var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(r(d[1])),o=t(r(d[2])),l=t(r(d[3])),s=C(r(d[4])),c=r(d[5]),u=r(d[6]),f=C(r(d[7])),h=r(d[8]),p=r(d[9]),y=r(d[10]),w=r(d[11]),b=r(d[12]),x=r(d[13]),j=r(d[14]),v=t(r(d[15])),O=t(r(d[16])),T=r(d[17]);function S(t){if("function"!=typeof WeakMap)return null;var n=new WeakMap,o=new WeakMap;return(S=function(t){return t?o:n})(t)}function C(t,n){if(!n&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var o=S(n);if(o&&o.has(t))return o.get(t);var l={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if("default"!==c&&Object.prototype.hasOwnProperty.call(t,c)){var u=s?Object.getOwnPropertyDescriptor(t,c):null;u&&(u.get||u.set)?Object.defineProperty(l,c,u):l[c]=t[c]}return l.default=t,o&&o.set(t,l),l}function I(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,l)}return o}function D(t){for(var n=1;n<arguments.length;n++){var l=null!=arguments[n]?arguments[n]:{};n%2?I(Object(l),!0).forEach(function(n){(0,o.default)(t,n,l[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):I(Object(l)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(l,n))})}return t}var P=function(t){var o=t.navigation,S=(0,y.useDispatch)(),C=(0,y.useSelector)(function(t){return t.userInfo}).user,I=u.Dimensions.get("window").width-80,P=s.default.useRef(null),V=s.default.useState(0),L=(0,l.default)(V,2),B=L[0],R=L[1],F=(0,s.useState)([]),N=(0,l.default)(F,2),A=N[0],_=N[1],M=(0,s.useState)(!1),U=(0,l.default)(M,2),W=U[0],z=U[1],E=function(t){switch(t.url){case"https://payapptransaction.page.link/back":o.navigate("Home");break;case"https://payapptransaction.page.link/success":K(),o.navigate("PaymentSuccess");break;case"https://payapptransaction.page.link/error_payment":console.log("error");break;case"https://payapptransaction.page.link/cardAdded":o.navigate("Home")}},H=function(t){console.log("loadrapyd");try{b.cloudFunction.httpsCallable("walletTransaction-get_Wallet_Balance")({ewalletId:t}).then(function(t){var n;t&&t.data[0].balance>0?S((0,w.setUserBalance)(null==(n=t.data[0])?void 0:n.balance)):S((0,w.setUserBalance)(0))}),b.cloudFunction.httpsCallable("walletTransaction-get_Wallet_Transactions")({ewalletId:t}).then(function(t){_(t.data)})}catch(t){console.log(t)}};(0,s.useEffect)(function(){var t=b.firestoreDb.collection("users").doc(b.firebaseAuth.currentUser.uid).onSnapshot(function(t){var n;console.log("first");var o=null==t?void 0:t.data();""==(null==o?void 0:o.username)&&z(!0),S((0,w.setUserInfo)({email:null==o?void 0:o.email,username:null==o?void 0:o.username,phoneNumber:null==o?void 0:o.phoneNumber,phoneNumberVerified:!(null==o||!o.phoneNumber),firstName:null==o?void 0:o.firstName,lastName:null==o?void 0:o.lastName,profileUrl:null==o?void 0:o.profileURL,uid:null==b.firebaseAuth?void 0:null==(n=b.firebaseAuth.currentUser)?void 0:n.uid,ewalletId:null==o?void 0:o.ewalletId,friendList:null==o?void 0:o.friendList,customerId:null==o?void 0:o.customerId,currency:null==o?void 0:o.currency,country:null==o?void 0:o.country}))}),o=b.notification.onMessage(function(t){var o,l;return n.default.async(function(n){for(;;)switch(n.prev=n.next){case 0:console.log("Message handled in the home screen!",t),x.utils.setNotificationsAsyncStorage(t),(0,j.showMessage)({message:null==t?void 0:null==(o=t.notification)?void 0:o.title,description:(null==t?void 0:null==(l=t.notification)?void 0:l.body)+" \ud83d\ude18",type:"info"});case 3:case"end":return n.stop()}},null,null,null,Promise)}),l=(0,O.default)().onLink(E);return function(){t(),o(),l()}},[]);var K=(0,s.useMemo)(function(){var t=b.firestoreDb.collection("users/"+b.firebaseAuth.currentUser.uid+"/transactions").limit(1).onSnapshot(function(t){console.log(t),null!=C&&C.ewalletId&&(H(null==C?void 0:C.ewalletId),console.log("onsnapshot"))});return function(){t()}},[null==C?void 0:C.ewalletId]),Z=function(){return u.Alert.alert("",(0,c.t)("commingSoon"),[{text:"OK",onPress:function(){return console.log("OK Pressed")}}])};return(0,T.jsxs)(u.View,{style:k.container,children:[(0,T.jsxs)(u.View,{style:D(D({},h.SIZES.marginHorizontal),{},{marginTop:13}),children:[console.log(null==C?void 0:C.ewalletId),(0,T.jsxs)(u.View,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,T.jsxs)(u.View,{children:[(0,T.jsx)(u.Text,{style:k.welcomeText,children:(0,c.t)("welcome")}),(0,T.jsx)(u.Text,{style:k.nameText,children:null==C?void 0:C.username})]}),(0,T.jsxs)(u.TouchableOpacity,{onPress:function(){return o.navigate("Notification")},style:k.notificationContainer,children:[(0,T.jsx)(u.View,{style:k.notificationDot}),(0,T.jsx)(u.Image,{source:h.icons.bell,style:{width:24,height:24,tintColor:"#1D2734"}})]})]}),(0,T.jsxs)(u.View,{style:{flexDirection:"row",justifyContent:"space-between",marginTop:10},children:[(0,T.jsx)(u.Text,{style:k.welcomeText,children:(0,c.t)("yourBalance")}),(0,T.jsxs)(u.Text,{style:k.balance,children:["\u20ac ",C.balance," "]})]})]}),(0,T.jsxs)(u.View,{style:k.OptionsAndCard,children:[(0,T.jsxs)(u.View,{style:{flexDirection:"row",justifyContent:"center",marginTop:20},children:[(0,T.jsxs)(u.View,{style:D(D({},k.options),k.shadow),children:[(0,T.jsxs)(u.TouchableOpacity,{style:k.IconButtonView,onPress:function(){return o.navigate("Transfer")},children:[(0,T.jsx)(u.Image,{source:h.icons.optionsTransfer,style:k.optionLogo}),(0,T.jsx)(u.Text,{style:k.optionText,children:(0,c.t)("transfer")})]}),(0,T.jsxs)(u.TouchableOpacity,{style:k.IconButtonView,onPress:function(){return o.navigate("TopUp")},children:[(0,T.jsx)(u.Image,{source:h.icons.optionsTopUp,style:k.optionLogo}),(0,T.jsx)(u.Text,{style:k.optionText,children:(0,c.t)("topUp")})]}),(0,T.jsxs)(u.TouchableOpacity,{style:k.IconButtonView,onPress:Z,children:[(0,T.jsx)(u.Image,{source:h.icons.optionsBill,style:k.optionLogo}),(0,T.jsx)(u.Text,{style:k.optionText,children:(0,c.t)("bill")})]}),(0,T.jsxs)(u.TouchableOpacity,{style:k.IconButtonView,onPress:function(){return o.navigate("more")},children:[(0,T.jsx)(u.Image,{source:h.icons.optionsMore,style:k.optionLogo}),(0,T.jsx)(u.Text,{style:k.optionText,children:(0,c.t)("more")})]})]}),(0,T.jsx)(u.View,{children:(0,T.jsx)(f.default,{ref:P,data:h.dummyData.Cards,inactiveSlideOpacity:.9,activeSlideAlignment:"start",contentContainerCustomStyle:{marginLeft:30},renderItem:function(t){var n=t.item;return(0,T.jsx)(u.TouchableWithoutFeedback,{onPress:function(){return o.navigate("CardDetail",{item:n})},children:(0,T.jsx)(u.View,{children:(0,T.jsx)(p.HomeCardItem,{item:n})})})},sliderWidth:I,itemWidth:190,useScrollView:!0,onSnapToItem:function(t){return R(t)}})})]}),(0,T.jsx)(f.Pagination,{dotsLength:h.dummyData.Cards.length,activeDotIndex:B,carouselRef:P,tappableDots:!0,dotContainerStyle:{height:20,width:10},dotStyle:{width:10,height:10,borderRadius:5,marginHorizontal:0,backgroundColor:"rgba(0, 0, 0, 0.92)"},inactiveDotOpacity:.4,inactiveDotScale:.6})]}),(0,T.jsx)(p.Section,{label:(0,c.t)("transactions"),icon:h.icons.right_arrow,iconstyle:{width:15,height:15,tintColor:"#273240"},containerStyle:{marginTop:24,marginBottom:10},onIconPress:function(){return o.navigate("Transactions",{item:"all"})}}),(0,T.jsx)(u.FlatList,{data:A,showsVerticalScrollIndicator:!1,keyExtractor:function(t){return""+t.id},style:{marginBottom:22},renderItem:function(t){var n=t.item,l=t.index,s=x.utils.cleanItem(n);return(0,T.jsxs)(u.View,{style:[l===A.length-1?{marginBottom:50}:null],children:[(0,T.jsx)(p.TransactionItem,{item:s,containerStyle:{marginTop:16},onPress:function(){return o.navigate("TransactionDetail",{item:n})}}),(0,T.jsx)(p.LineDivider,{lineStyle:D(D({height:l===A.length-1?0:1,backgroundColor:"#F3F4F6",marginTop:16},h.SIZES.marginHorizontal),{},{width:"85%"})})]})},ListEmptyComponent:(0,T.jsx)(u.View,{style:{justifyContent:"center",alignItems:"center",marginTop:20},children:(0,T.jsx)(u.Text,{style:D(D({},h.FONTS.body3),{},{color:h.COLORS.blue}),children:(0,c.t)("makeTransaction")})})}),(0,T.jsx)(u.View,{children:(0,T.jsx)(v.default,{closeModel:function(){z(!W)},isVisible:W})})]})};e.default=P;var k=u.StyleSheet.create({container:{flex:1,backgroundColor:h.COLORS.white},shadow:{shadowColor:"#D1D5DB",shadowOffset:{width:16,height:4},shadowOpacity:.8,shadowRadius:20,elevation:8},notificationContainer:{width:48,height:48,backgroundColor:"#F9FAFB",borderRadius:12,justifyContent:"center",alignItems:"center"},notificationDot:{backgroundColor:"#1D3A70",width:8,height:8,borderRadius:4,position:"absolute",top:13,right:13},welcomeText:D(D({},h.FONTS.body2),{},{color:h.COLORS.lightGray3,fontSize:12}),nameText:D(D({},h.FONTS.h3),{},{fontSize:18,color:h.COLORS.darkBlue3}),balance:D(D({},h.FONTS.h5),{},{fontSize:20,color:h.COLORS.darkBlue3,marginTop:4}),OptionsAndCard:{marginTop:8,backgroundColor:h.COLORS.white3,alignItems:"center",justifyContent:"center"},options:{height:292,width:83,backgroundColor:h.COLORS.white,borderRadius:20,justifyContent:"space-around",alignItems:"center"},IconButtonView:{width:70,height:50,justifyContent:"center",alignItems:"center"},optionLogo:{width:24,height:24},optionText:D(D({marginTop:8},h.FONTS.h4),{},{fontSize:12,color:h.COLORS.darkBlue3,letterSpacing:.3})})